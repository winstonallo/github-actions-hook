name: rustfmt
on:
    push: &trigger_config
        branches: ["*"]
        paths:
            - macros/**
            - src/**
            - tests/**
            - Cargo.toml
            - Cargo.lock
            - .github/workflows/clippy.yml
    pull_request:
        <<: *trigger_config
jobs:
    run-rustfmt:
        runs-on: ubuntu-latest
        container: ghcr.io/winstonallo/kernel-test-runner

        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Check formatting
              run: cargo fmt -- --check
